<!doctype html><html lang=vi dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="noindex, nofollow"><title>Time series momentum - A traditional approach | The Financial Engineer</title>
<meta name=keywords content><meta name=description content="Time series momentum thử nghiệm trên thị trường Việt Nam"><meta name=author content><link rel=canonical href=http://localhost:1313/posts/2025/2025-03-24-tsmom-vietnam/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=vi href=http://localhost:1313/posts/2025/2025-03-24-tsmom-vietnam/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous referrerpolicy=no-referrer><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous referrerpolicy=no-referrer type=text/javascript></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous referrerpolicy=no-referrer type=text/javascript></script><script type=text/javascript>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]})})</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="The Financial Engineer (Alt + H)">The Financial Engineer</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/about/ title=About><span>About</span></a></li><li><a href=http://localhost:1313/archives/ title=Archive><span>Archive</span></a></li><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li><li><a href=http://localhost:1313/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Time series momentum - A traditional approach</h1><div class=post-description>Time series momentum thử nghiệm trên thị trường Việt Nam</div><div class=post-meta><span title='2025-03-24 00:00:00 +0000 UTC'>tháng 3 24, 2025</span></div></header><div class=post-content><p><img loading=lazy src=images/0.png alt=0.png></p><p>Time Series Momentum - TSMOM, được Moskowitz, Ooi và Pedersen (2012), là một trong những chiến lược factor investing nổi bật và được nhiều nhà phân tích, nhà nghiên cứu thử nghiệm trên đa dạng thị trường. Hôm nay chúng ta sẽ tìm hiểu về chiến lược này, xem xét cách họ kiểm định các giả thuyết và xây dựng nên một chiến lược factor investing.</p><h2 id=concept>Concept<a hidden class=anchor aria-hidden=true href=#concept>#</a></h2><p>Khác với XSMOM (Cross sectional momentum , bạn có thể đọc <a href=https://www.linkedin.com/feed/update/urn:li:activity:7305494271439081472>tại đây</a>), TSMOM tập trung vào khai thác động lượng của cổ phiếu đó so với quá khứ của chính nó (thay vì nhìn con nhà người ta và so sánh với họ, thì TSMOM là vượt lên chính mình là được rồi, haha). Chiến lược này dựa trên giả thuyết rằng xu hướng giá có tính liên tục (persistence) và có thể dự đoán được phần nào dựa trên lịch sử giá. Thay vì so sánh hiệu suất giữa các tài sản như XSMOM, TSMOM xem xét liệu một tài sản có duy trì được đà tăng/giảm của chính nó hay không.</p><p>Quantopia có 1 bài viết và video rất sâu về TSMOM: <a href=https://quantpedia.com/strategies/time-series-momentum-effect/>link</a></p><p><img loading=lazy src=images/1.png alt=1.png></p><p>OK, khái niệm rất đơn giản. Giả thuyết của chúng ta là: &ldquo;Cổ phiếu sẽ tiếp tục đà tăng/giảm dựa trên hiệu suất trong quá khứ&rdquo;. Hãy cùng kiểm định giả thuyết này cho thị trường Việt Nam nhé.</p><p>Bài viết này sẽ cố gắng xây dựng lại các thử nghiệm và giả thuyết dựa trên:</p><p><a href=https://pages.stern.nyu.edu/~lpederse/papers/TSMOM_Slides.pdf>https://pages.stern.nyu.edu/~lpederse/papers/TSMOM_Slides.pdf</a></p><h2 id=regression-and-evidence>Regression and evidence<a hidden class=anchor aria-hidden=true href=#regression-and-evidence>#</a></h2><p>Họ bắt đầu với độ biến động (volatility) như một biến chuẩn hóa cho lợi nhuận vì mỗi cổ phiếu có mức độ volatile khác nhau. Trong bài viết, họ sử dụng mô hình EWMA đơn giản để tính toán độ rủi ro (volatility).</p>$$
\sigma_t^2\;=\;261\sum_{i=0}^\infty(1-\delta)\,\delta^i\bigl(r_{t-1-i} - \overline{r}_t\bigr)^2
$$<p>Với:</p><ul><li>σ²ₜ là phương sai tại thời điểm t</li><li>261 là số ngày giao dịch trong năm → chúng ta sẽ đổi tham số này thành 252 cho thị trường Việt Nam.</li><li>δ (delta) là hệ số suy giảm. Một cách tính toán để gán trọng số cao hơn cho dữ liệu gần đây và giảm dần theo thời gian. → phản ảnh biến động gần đây quan trọng hơn. Cách tính này khác độ biến động volatility thông thường khi độ biến động mọi ngày trong khoảng thời gian quan sát có độ quan trọng giống nhau.</li><li>rₜ₋₁₋ᵢ là lợi nhuận tại thời điểm t-1-i</li><li>r̄ₜ là lợi nhuận trung bình</li></ul><p>Volatility thu được từ công thức này sẽ được sử dụng để chuẩn hóa lợi nhuận, giúp so sánh công bằng giữa các cổ phiếu có mức độ biến động khác nhau.</p><p>Let’s code it in python</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>exante_volatility</span>(returns, com<span style=color:#f92672>=</span><span style=color:#ae81ff>60</span>, annualization<span style=color:#f92672>=</span><span style=color:#ae81ff>252</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Compute the ex ante annualized volatility using an exponentially weighted variance.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    The formula is:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      σ_t^2 = 252 * Σ_{i=0}^∞ w_i (r_{t-1-i} - r̄_t)^2,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Parameters:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        returns (pd.Series): Asset returns.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        com (int): Center of mass for the exponential weights (default is 60).
</span></span></span><span style=display:flex><span><span style=color:#e6db74>		    annualization: annualization factor - default is 252    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        pd.Series: The ex ante volatility σ_t (annualized by multiplying the variance by 261).
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                   Volatility is computed using returns up to t-1.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    ewm_variance <span style=color:#f92672>=</span> returns<span style=color:#f92672>.</span>ewm(com<span style=color:#f92672>=</span>com, adjust<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>,min_periods<span style=color:#f92672>=</span>com)<span style=color:#f92672>.</span>var()
</span></span><span style=display:flex><span>    sigma <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>sqrt(annualization <span style=color:#f92672>*</span> ewm_variance)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> sigma
</span></span></code></pre></td></tr></table></div></div><p>Kết quả của tính toán trên sẽ trông như sau, với đường màu xanh tượng trưng cho độ biến động (volatility) và đường màu cam là giá cổ phiếu ACB.</p><p><img loading=lazy src=images/2.png alt=2.png></p><h3 id=regression-analysis>Regression analysis<a hidden class=anchor aria-hidden=true href=#regression-analysis>#</a></h3><p>Để kiểm định giả thuyết &ldquo;Cổ phiếu sẽ tiếp tục đà tăng/giảm dựa trên hiệu suất trong quá khứ&rdquo;, chúng ta sẽ sử dụng phân tích hồi quy (regression analysis). Phân tích hồi quy sẽ giúp chúng ta hiểu mối quan hệ giữa lợi nhuận trong quá khứ và lợi nhuận trong tương lai, cũng như đánh giá độ tin cậy của mối quan hệ này. Cụ thể, chúng ta sẽ thực hiện hồi quy lợi nhuận trong tương lai (future returns) lên lợi nhuận trong quá khứ (past returns).</p><p>Tuy nhiên, kiểm định này được thực hiện khác với bài viết gốc. Trong khi bài viết gốc sử dụng dữ liệu tháng để chạy hồi quy, người viết muốn thử nghiệm với dữ liệu tuần (tức giao dịch theo tuần) để xem chiến lược này hoạt động như thế nào. Do đó, tất cả các thử nghiệm hồi quy và chiến lược backtest sẽ được thực hiện trên dữ liệu tuần.</p><p>Mô hình hồi quy cơ bản có dạng:</p>$$
\frac{r_{t}^s}{\sigma_{t-1}^s} = \alpha + \beta_h \frac{r_{t-h}^s}{\sigma_{t-h-1}^s} + \epsilon_h^s
$$<p><img loading=lazy src=images/3.png alt=3.png></p><p>Ngoài ra, không chỉ đánh giá mỗi lợi nhuận lịch sử, tác giả đánh giá khả năng dự đoán của TSMOM thông qua hồi quy tín hiệu đơn giản - <a href=https://en.wikipedia.org/wiki/Sign_function>sign</a>- của lợi nhuận (sign số dương bằng 1 và số âm bằng -1)</p>$$
\frac{r_{t}^s}{\sigma_{t-1}^s} = \alpha + \beta_h \text{sign}(r_{t-h}^s) + \epsilon_h^s
$$<p><img loading=lazy src=images/4.png alt=4.png></p><p>2 mô hình hồi quy trên được chạy trên giá của 60 cổ phiếu có giá trị giao dịch cao nhất và niêm yết từ 2014 tới nay.</p><ul><li>Mỗi cột biểu diễn giá trị t-statistic của βh ứng với từng độ trễ (week lag) từ 1 đến 50 tuần.</li><li>Đường nét đứt màu đỏ (thường) biểu thị mức ý nghĩa thống kê ở khoảng ±1.96(tương đương kiểm định hai phía với mức ý nghĩa 5%). Nếu cột (tức t-statistic) vượt quá giá trị này về phía dương hoặc âm, ta có thể kết luận hệ số βh là có ý nghĩa thống kê tại độ trễ (lookback) tương ứng.</li><li>Ở độ trễ 2 và 6, ta thấy nhiều cột t-statistic rất cao, cho thấy βh dương và có ý nghĩa thống kê. Điều này chứng tỏ có hiệu ứng động lượng (momentum) đáng kể trong ngắn hạn, tức là cổ phiếu có xu hướng duy trì đà tăng/giảm trong vài tuần đầu tiên. Tức nếu 2 hoặc 6 tuần trước giá cổ phiếu tăng thì tuần này cũng có khả năng tăng rất cao và ngược lại.</li><li>Khi độ trễ tăng (từ khoảng 10 tuần trở đi), ta thấy t-stat dưới -2 cho thấy có thể có yếu tố “reversal” tức sau 10 tuần thì trend có khả năng đảo chiều.</li></ul><p>Một chút phân tích: ở khung thời gian tuần, thị trường có thể bị ảnh hưởng nhiều bởi các yếu tố tâm lý, thanh khoản, tin tức ngắn hạn… Do đó, <strong>momentum</strong> thường bộc lộ rõ hơn trong vài tuần đầu, rồi nhanh chóng phai dần hoặc đảo ngược khi nhà đầu tư điều chỉnh vị thế hoặc chốt lời (10 tuần ~ 2 tháng)</p><p>[Vì code cho regression test khá dài nên nhờ bạn comment email ở linkedin và mình sẽ gửi đến bạn nhanh nhất]</p><p>Sau khi chạy kiểm định hồi quy, ta rút ra được rằng chiến lược TSMOM có hiệu quả đáng kể trong ngắn hạn, đặc biệt là trong khoảng 2-6 tuần đầu tiên khi cổ phiếu có xu hướng duy trì đà tăng/giảm của mình. Tuy nhiên, sau khoảng 10 tuần (tương đương 2 tháng), hiệu ứng này có dấu hiệu đảo chiều, cho thấy các nhà đầu tư nên cân nhắc điều chỉnh chiến lược giao dịch của mình sau khung thời gian này. Giờ chúng ta sẽ cùng phát triển chiến lược TSMOM dựa trên khung thời gian tuần nhé.</p><h2 id=tsmom-design-from-scratch>TSMOM, design from scratch.<a hidden class=anchor aria-hidden=true href=#tsmom-design-from-scratch>#</a></h2><p>Đối với bất kỳ chiến lược giao dịch nào, chúng ta cần xác định 2 yếu tố: thời điểm mua (<strong>signal</strong>) và số lượng mua (<strong>position</strong>). TSMOM cũng cần 2 bước này.</p><h3 id=signal>Signal<a hidden class=anchor aria-hidden=true href=#signal>#</a></h3><p>Chiến lược momentum có signal tương đối đơn giản, nếu lợi nhuận tích luỹ trong “h” tháng lớn hơn 0 thì long, nếu âm thì short, còn nếu bằng 0 thì không làm gì. Vì chúng ta đang thử nghiệm ở thị trường VN nên chiến lược được thiết kế dạng long-only.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>compute_signal</span>(returns, window<span style=color:#f92672>=</span><span style=color:#ae81ff>6</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Compute the trading signal based on cumulative standardized returns over a rolling window.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    The paper uses:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>       signal_t = sign(r_{t-6,t}^s)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    where r_{t-6,t}^s is the return from t-window to t.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    cum_rets <span style=color:#f92672>=</span> returns<span style=color:#f92672>.</span>rolling(window<span style=color:#f92672>=</span>window)<span style=color:#f92672>.</span>apply(<span style=color:#66d9ef>lambda</span> x: np<span style=color:#f92672>.</span>prod(x)) <span style=color:#75715e>## lợi nhuận tích luỹ </span>
</span></span><span style=display:flex><span>    signal <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>sign(cum_rets)<span style=color:#f92672>.</span>clip(lower<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>) <span style=color:#75715e>## sign để lấy chiều, clip lower 0 để loại bỏ các tín hiệu -1 tượng trưng cho short</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> signal
</span></span></code></pre></td></tr></table></div></div><p>Signal sẽ trông như thế này. 1 sẽ tương ứng với mua, và 0 là không làm gì.</p><p><img loading=lazy src=images/5.png alt=5.png></p><h2 id=position-sizing>Position sizing<a hidden class=anchor aria-hidden=true href=#position-sizing>#</a></h2><p>Với chiến lược momentum, rủi ro chính là việc không thể dự đoán được thời điểm thị trường đảo chiều. Tuy nhiên, chúng ta có thể hạn chế rủi ro này thông qua kỹ thuật &ldquo;Inverse volatility&rdquo; (đi ngược biến động).</p><p>Thay vì cố đoán thời điểm đảo chiều, chúng ta sẽ xác định trước mức rủi ro chấp nhận được và điều chỉnh vị thế khi rủi ro tăng - Volatility targeting. Đối với cổ phiếu có biến động thấp, ta có thể sử dụng thêm margin để tăng mức độ phơi nhiễm lên mức mục tiêu, từ đó tối ưu hóa cơ hội đầu tư.</p><p>Bài viết gốc sử dụng mức rủi ro mục tiêu là 40% (hàng năm). Chúng ta sẽ cùng thử nghiệm với cổ phiếu ACB, sử dụng volatility targeting để xác định kích thước vị thế như sau:</p><p><img loading=lazy src=images/6.png alt=6.png></p><p>Cột màu cam thể hiện số lượng cổ phiếu mua dưới dạng phần trăm (%) trong khoảng từ 0 đến 2 (tức 0–200%). Mức trần được giới hạn ở 2 với giả định chúng ta luôn ký quỹ được 50%. Trong các giai đoạn rủi ro cao như 2016, 2018 và 2022, sizing của chúng ta dao động từ 0 đến 1.8 tùy thời điểm. Đặc biệt năm 2018—năm biến động rất lớn của ACB—chúng ta chỉ mua cổ phiếu dưới 100% số tiền hiện có (đi ngược độ biến động), từ đó bảo toàn được vốn. Sizing phụ thuộc vào Volaitlity target chúng ta đã đặt từ trước, volatility target càng nhỏ thì position sẽ giảm lại.</p><p>Chung quy lại, TSMOM dựa trên 2 kỹ thuật sau</p><ul><li>Xác định cổ phiếu có đang trend không dựa trên lợi nhuận tích luỹ trong “h” tháng vừa qua.</li><li>Xác định số cổ phiếu cần mua dựa trên kỹ thuật volatility targeting.</li></ul><h2 id=backtest>Backtest<a hidden class=anchor aria-hidden=true href=#backtest>#</a></h2><p>Backtest cho chiến lược này tương đối đơn giản.
Ta sẽ lấy tín hiệu (signal) nhân với số lượng (sizing) và nhân với lợi nhuận tuần sau trừ đi chi phí</p>$$
r_{t,t+1}^{TSMOM} =\text{signal} *\text{position} *\text{return} - \text{cost}= sign(r_{t-6, t})*\frac{0.4}{\sigma_t}*r_{t,t+1} - \text{cost}
$$<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>backtest</span>(daily_price, vol_target<span style=color:#f92672>=</span><span style=color:#ae81ff>0.4</span>, look_back <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>, commission<span style=color:#f92672>=</span><span style=color:#ae81ff>0.001</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Backtest a trading strategy that goes long (short) when the signal is +1 (-1).
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Parameters:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        returns (pd.Series): Asset returns.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        pd.Series: The strategy returns.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>## compute the daily ex ante volatility first</span>
</span></span><span style=display:flex><span>    daily_return <span style=color:#f92672>=</span> daily_price<span style=color:#f92672>.</span>pct_change()<span style=color:#f92672>.</span>dropna()
</span></span><span style=display:flex><span>    weekly_return <span style=color:#f92672>=</span> daily_price<span style=color:#f92672>.</span>resample(<span style=color:#e6db74>&#39;W&#39;</span>)<span style=color:#f92672>.</span>last()<span style=color:#f92672>.</span>pct_change()<span style=color:#f92672>.</span>dropna()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    daily_vol <span style=color:#f92672>=</span> exante_volatility(daily_return, com<span style=color:#f92672>=</span><span style=color:#ae81ff>60</span>)
</span></span><span style=display:flex><span>    weekly_vol <span style=color:#f92672>=</span> daily_vol<span style=color:#f92672>.</span>resample(<span style=color:#e6db74>&#39;W&#39;</span>)<span style=color:#f92672>.</span>last()<span style=color:#f92672>.</span>ffill()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>## position sizing</span>
</span></span><span style=display:flex><span>    position_size <span style=color:#f92672>=</span> vol_target <span style=color:#f92672>/</span> weekly_vol
</span></span><span style=display:flex><span>    position_size <span style=color:#f92672>=</span> position_size<span style=color:#f92672>.</span>clip(upper<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>) <span style=color:#75715e>## max margin is 2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    signal <span style=color:#f92672>=</span> compute_signal(weekly_return, window<span style=color:#f92672>=</span>look_back)
</span></span><span style=display:flex><span>    position <span style=color:#f92672>=</span> signal <span style=color:#f92672>*</span> position_size
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    trade_cost <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> commission <span style=color:#f92672>*</span> position<span style=color:#f92672>.</span>diff()<span style=color:#f92672>.</span>abs()<span style=color:#f92672>.</span>shift(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>## Compute strategy returns:</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Use the previous period&#39;s position (position.shift(1)) applied to the current week&#39;s return,</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># and subtract any commission cost incurred at the beginning of the period.</span>
</span></span><span style=display:flex><span>    strat_ret <span style=color:#f92672>=</span> (position <span style=color:#f92672>*</span> weekly_return<span style=color:#f92672>.</span>shift(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) 
</span></span><span style=display:flex><span>                 <span style=color:#f92672>-</span> trade_cost)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    return_df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>DataFrame({
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;raw_rets&#39;</span>: weekly_return,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;signal&#39;</span>: signal,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;position_size&#39;</span>: position_size,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;position&#39;</span>: position,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;trade_cost&#39;</span>: trade_cost,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;strat_rets&#39;</span>: strat_ret
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> return_df<span style=color:#f92672>.</span>dropna()
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=images/7.png alt=7.png></p><p>Thử nghiệm trên cổ phiếu HPG, ta thấy lợi nhuận tích luỹ vượt trội hẳn so với chiến lược buy and hold thông thường.</p><table><thead><tr><th style=text-align:left></th><th style=text-align:left>TSMOM - HPG</th><th style=text-align:left>Buy&amp;Hold - HPG</th></tr></thead><tbody><tr><td style=text-align:left>Lợi nhuận hàng năm</td><td style=text-align:left>29.23%</td><td style=text-align:left>23.63%</td></tr><tr><td style=text-align:left>Biến động hằng năm</td><td style=text-align:left>29.03%</td><td style=text-align:left>33.65%</td></tr><tr><td style=text-align:left>Sharpe</td><td style=text-align:left>1.01</td><td style=text-align:left>0.7</td></tr><tr><td style=text-align:left>Skewness</td><td style=text-align:left>0.36</td><td style=text-align:left>0.36</td></tr><tr><td style=text-align:left>Kurtosis</td><td style=text-align:left>4.16</td><td style=text-align:left>3.67</td></tr></tbody></table><p>Vì chỉ mua khi cổ phiếu có “trend” và tận dụng sử dụng margin khi cổ phiếu biến động thấp và giảm vị thế khi cổ phiếu biến động mạnh, nên lợi nhuận cũng như độ biến động trung bình hằng năm đều tốt hơn so với chiến lược chỉ buy and hold cổ phiếu. Từ đó dẫn đến tỷ lệ sharpe vượt lên mức 1.</p><p>60 cổ phiếu trong sample test</p><table><thead><tr><th style=text-align:left>symbol</th><th style=text-align:left>Annualized Return</th><th style=text-align:left>Annualized Volatility</th><th style=text-align:left>Sharpe Ratio</th><th style=text-align:left>Skewness</th><th style=text-align:left>Kurtosis</th></tr></thead><tbody><tr><td style=text-align:left>FPT</td><td style=text-align:left>39%</td><td style=text-align:left>31%</td><td style=text-align:left>1.26</td><td style=text-align:left>1.28</td><td style=text-align:left>6.60</td></tr><tr><td style=text-align:left>PDR</td><td style=text-align:left>36%</td><td style=text-align:left>32%</td><td style=text-align:left>1.10</td><td style=text-align:left>1.19</td><td style=text-align:left>6.96</td></tr><tr><td style=text-align:left>MBB</td><td style=text-align:left>32%</td><td style=text-align:left>31%</td><td style=text-align:left>1.03</td><td style=text-align:left>1.29</td><td style=text-align:left>5.57</td></tr><tr><td style=text-align:left>VND</td><td style=text-align:left>31%</td><td style=text-align:left>30%</td><td style=text-align:left>1.03</td><td style=text-align:left>1.38</td><td style=text-align:left>7.40</td></tr><tr><td style=text-align:left>HCM</td><td style=text-align:left>28%</td><td style=text-align:left>28%</td><td style=text-align:left>1.02</td><td style=text-align:left>1.00</td><td style=text-align:left>5.98</td></tr><tr><td style=text-align:left>TCM</td><td style=text-align:left>29%</td><td style=text-align:left>30%</td><td style=text-align:left>0.98</td><td style=text-align:left>1.52</td><td style=text-align:left>7.69</td></tr><tr><td style=text-align:left>HPG</td><td style=text-align:left>27%</td><td style=text-align:left>29%</td><td style=text-align:left>0.93</td><td style=text-align:left>0.41</td><td style=text-align:left>4.11</td></tr><tr><td style=text-align:left>VCB</td><td style=text-align:left>30%</td><td style=text-align:left>32%</td><td style=text-align:left>0.93</td><td style=text-align:left>1.33</td><td style=text-align:left>6.02</td></tr><tr><td style=text-align:left>VIX</td><td style=text-align:left>29%</td><td style=text-align:left>31%</td><td style=text-align:left>0.93</td><td style=text-align:left>1.53</td><td style=text-align:left>7.92</td></tr><tr><td style=text-align:left>HSG</td><td style=text-align:left>24%</td><td style=text-align:left>27%</td><td style=text-align:left>0.89</td><td style=text-align:left>0.73</td><td style=text-align:left>4.03</td></tr><tr><td style=text-align:left>NKG</td><td style=text-align:left>29%</td><td style=text-align:left>32%</td><td style=text-align:left>0.89</td><td style=text-align:left>0.98</td><td style=text-align:left>5.41</td></tr><tr><td style=text-align:left>PNJ</td><td style=text-align:left>29%</td><td style=text-align:left>33%</td><td style=text-align:left>0.89</td><td style=text-align:left>0.80</td><td style=text-align:left>5.62</td></tr><tr><td style=text-align:left>KDH</td><td style=text-align:left>26%</td><td style=text-align:left>32%</td><td style=text-align:left>0.81</td><td style=text-align:left>1.18</td><td style=text-align:left>5.45</td></tr><tr><td style=text-align:left>HDG</td><td style=text-align:left>22%</td><td style=text-align:left>28%</td><td style=text-align:left>0.80</td><td style=text-align:left>0.61</td><td style=text-align:left>4.14</td></tr><tr><td style=text-align:left>ACB</td><td style=text-align:left>25%</td><td style=text-align:left>33%</td><td style=text-align:left>0.77</td><td style=text-align:left>1.92</td><td style=text-align:left>14.27</td></tr><tr><td style=text-align:left>CTD</td><td style=text-align:left>23%</td><td style=text-align:left>33%</td><td style=text-align:left>0.69</td><td style=text-align:left>0.43</td><td style=text-align:left>4.34</td></tr><tr><td style=text-align:left>SSI</td><td style=text-align:left>19%</td><td style=text-align:left>28%</td><td style=text-align:left>0.68</td><td style=text-align:left>0.46</td><td style=text-align:left>5.39</td></tr><tr><td style=text-align:left>DIG</td><td style=text-align:left>21%</td><td style=text-align:left>31%</td><td style=text-align:left>0.67</td><td style=text-align:left>1.37</td><td style=text-align:left>8.70</td></tr><tr><td style=text-align:left>SHB</td><td style=text-align:left>20%</td><td style=text-align:left>32%</td><td style=text-align:left>0.63</td><td style=text-align:left>3.04</td><td style=text-align:left>20.06</td></tr><tr><td style=text-align:left>HDC</td><td style=text-align:left>20%</td><td style=text-align:left>32%</td><td style=text-align:left>0.62</td><td style=text-align:left>1.08</td><td style=text-align:left>4.97</td></tr><tr><td style=text-align:left>REE</td><td style=text-align:left>17%</td><td style=text-align:left>29%</td><td style=text-align:left>0.60</td><td style=text-align:left>0.47</td><td style=text-align:left>4.33</td></tr><tr><td style=text-align:left>TSC</td><td style=text-align:left>20%</td><td style=text-align:left>34%</td><td style=text-align:left>0.60</td><td style=text-align:left>1.03</td><td style=text-align:left>7.22</td></tr><tr><td style=text-align:left>CTG</td><td style=text-align:left>18%</td><td style=text-align:left>31%</td><td style=text-align:left>0.59</td><td style=text-align:left>0.66</td><td style=text-align:left>6.49</td></tr><tr><td style=text-align:left>KBC</td><td style=text-align:left>18%</td><td style=text-align:left>31%</td><td style=text-align:left>0.58</td><td style=text-align:left>1.19</td><td style=text-align:left>8.48</td></tr><tr><td style=text-align:left>PHR</td><td style=text-align:left>19%</td><td style=text-align:left>33%</td><td style=text-align:left>0.58</td><td style=text-align:left>0.78</td><td style=text-align:left>5.49</td></tr><tr><td style=text-align:left>NLG</td><td style=text-align:left>16%</td><td style=text-align:left>29%</td><td style=text-align:left>0.57</td><td style=text-align:left>1.03</td><td style=text-align:left>7.06</td></tr><tr><td style=text-align:left>KSB</td><td style=text-align:left>15%</td><td style=text-align:left>31%</td><td style=text-align:left>0.50</td><td style=text-align:left>0.81</td><td style=text-align:left>6.68</td></tr><tr><td style=text-align:left>VNM</td><td style=text-align:left>13%</td><td style=text-align:left>27%</td><td style=text-align:left>0.50</td><td style=text-align:left>0.70</td><td style=text-align:left>7.44</td></tr><tr><td style=text-align:left>IJC</td><td style=text-align:left>16%</td><td style=text-align:left>33%</td><td style=text-align:left>0.49</td><td style=text-align:left>2.77</td><td style=text-align:left>19.07</td></tr><tr><td style=text-align:left>TTF</td><td style=text-align:left>14%</td><td style=text-align:left>28%</td><td style=text-align:left>0.49</td><td style=text-align:left>0.18</td><td style=text-align:left>5.94</td></tr><tr><td style=text-align:left>CII</td><td style=text-align:left>12%</td><td style=text-align:left>27%</td><td style=text-align:left>0.45</td><td style=text-align:left>1.68</td><td style=text-align:left>11.26</td></tr><tr><td style=text-align:left>DBC</td><td style=text-align:left>13%</td><td style=text-align:left>31%</td><td style=text-align:left>0.43</td><td style=text-align:left>0.80</td><td style=text-align:left>8.50</td></tr><tr><td style=text-align:left>DXG</td><td style=text-align:left>12%</td><td style=text-align:left>28%</td><td style=text-align:left>0.43</td><td style=text-align:left>(0.15)</td><td style=text-align:left>5.11</td></tr><tr><td style=text-align:left>STB</td><td style=text-align:left>13%</td><td style=text-align:left>29%</td><td style=text-align:left>0.43</td><td style=text-align:left>0.39</td><td style=text-align:left>5.32</td></tr><tr><td style=text-align:left>FIT</td><td style=text-align:left>14%</td><td style=text-align:left>34%</td><td style=text-align:left>0.41</td><td style=text-align:left>1.30</td><td style=text-align:left>9.66</td></tr><tr><td style=text-align:left>DRC</td><td style=text-align:left>11%</td><td style=text-align:left>28%</td><td style=text-align:left>0.40</td><td style=text-align:left>0.22</td><td style=text-align:left>4.87</td></tr><tr><td style=text-align:left>LCG</td><td style=text-align:left>10%</td><td style=text-align:left>25%</td><td style=text-align:left>0.40</td><td style=text-align:left>0.45</td><td style=text-align:left>5.13</td></tr><tr><td style=text-align:left>GAS</td><td style=text-align:left>11%</td><td style=text-align:left>28%</td><td style=text-align:left>0.39</td><td style=text-align:left>0.12</td><td style=text-align:left>7.19</td></tr><tr><td style=text-align:left>HHS</td><td style=text-align:left>14%</td><td style=text-align:left>35%</td><td style=text-align:left>0.39</td><td style=text-align:left>(1.36)</td><td style=text-align:left>21.84</td></tr><tr><td style=text-align:left>PVT</td><td style=text-align:left>11%</td><td style=text-align:left>28%</td><td style=text-align:left>0.39</td><td style=text-align:left>0.60</td><td style=text-align:left>7.48</td></tr><tr><td style=text-align:left>IDI</td><td style=text-align:left>12%</td><td style=text-align:left>33%</td><td style=text-align:left>0.38</td><td style=text-align:left>1.90</td><td style=text-align:left>13.31</td></tr><tr><td style=text-align:left>KDC</td><td style=text-align:left>12%</td><td style=text-align:left>33%</td><td style=text-align:left>0.38</td><td style=text-align:left>2.93</td><td style=text-align:left>25.95</td></tr><tr><td style=text-align:left>PAN</td><td style=text-align:left>12%</td><td style=text-align:left>31%</td><td style=text-align:left>0.37</td><td style=text-align:left>1.86</td><td style=text-align:left>15.15</td></tr><tr><td style=text-align:left>VIC</td><td style=text-align:left>10%</td><td style=text-align:left>32%</td><td style=text-align:left>0.30</td><td style=text-align:left>1.48</td><td style=text-align:left>9.59</td></tr><tr><td style=text-align:left>OGC</td><td style=text-align:left>9%</td><td style=text-align:left>31%</td><td style=text-align:left>0.29</td><td style=text-align:left>1.98</td><td style=text-align:left>12.33</td></tr><tr><td style=text-align:left>SBT</td><td style=text-align:left>9%</td><td style=text-align:left>33%</td><td style=text-align:left>0.28</td><td style=text-align:left>(1.09)</td><td style=text-align:left>14.14</td></tr><tr><td style=text-align:left>VCG</td><td style=text-align:left>7%</td><td style=text-align:left>28%</td><td style=text-align:left>0.26</td><td style=text-align:left>0.48</td><td style=text-align:left>6.63</td></tr><tr><td style=text-align:left>HAG</td><td style=text-align:left>7%</td><td style=text-align:left>30%</td><td style=text-align:left>0.24</td><td style=text-align:left>1.35</td><td style=text-align:left>13.48</td></tr><tr><td style=text-align:left>ASM</td><td style=text-align:left>7%</td><td style=text-align:left>28%</td><td style=text-align:left>0.23</td><td style=text-align:left>(0.02)</td><td style=text-align:left>7.90</td></tr><tr><td style=text-align:left>PET</td><td style=text-align:left>7%</td><td style=text-align:left>31%</td><td style=text-align:left>0.23</td><td style=text-align:left>1.47</td><td style=text-align:left>10.78</td></tr><tr><td style=text-align:left>DPM</td><td style=text-align:left>6%</td><td style=text-align:left>28%</td><td style=text-align:left>0.22</td><td style=text-align:left>0.63</td><td style=text-align:left>6.32</td></tr><tr><td style=text-align:left>DLG</td><td style=text-align:left>6%</td><td style=text-align:left>31%</td><td style=text-align:left>0.19</td><td style=text-align:left>1.30</td><td style=text-align:left>11.48</td></tr><tr><td style=text-align:left>PVD</td><td style=text-align:left>6%</td><td style=text-align:left>30%</td><td style=text-align:left>0.19</td><td style=text-align:left>0.07</td><td style=text-align:left>6.02</td></tr><tr><td style=text-align:left>BVH</td><td style=text-align:left>5%</td><td style=text-align:left>30%</td><td style=text-align:left>0.18</td><td style=text-align:left>1.15</td><td style=text-align:left>11.03</td></tr><tr><td style=text-align:left>GMD</td><td style=text-align:left>4%</td><td style=text-align:left>26%</td><td style=text-align:left>0.16</td><td style=text-align:left>0.79</td><td style=text-align:left>4.16</td></tr><tr><td style=text-align:left>HQC</td><td style=text-align:left>5%</td><td style=text-align:left>31%</td><td style=text-align:left>0.16</td><td style=text-align:left>2.68</td><td style=text-align:left>20.08</td></tr><tr><td style=text-align:left>MSN</td><td style=text-align:left>4%</td><td style=text-align:left>31%</td><td style=text-align:left>0.14</td><td style=text-align:left>1.72</td><td style=text-align:left>13.40</td></tr><tr><td style=text-align:left>VHC</td><td style=text-align:left>3%</td><td style=text-align:left>30%</td><td style=text-align:left>0.11</td><td style=text-align:left>(0.15)</td><td style=text-align:left>5.46</td></tr><tr><td style=text-align:left>FCN</td><td style=text-align:left>2%</td><td style=text-align:left>29%</td><td style=text-align:left>0.09</td><td style=text-align:left>0.38</td><td style=text-align:left>8.03</td></tr><tr><td style=text-align:left>EIB</td><td style=text-align:left>-2%</td><td style=text-align:left>29%</td><td style=text-align:left>(0.08)</td><td style=text-align:left>0.40</td><td style=text-align:left>8.00</td></tr></tbody></table><p><img loading=lazy src=images/8.png alt=8.png></p><p>Để tạo một factor TSMOM, chúng ta cần tính trung bình cho toàn bộ mẫu nghiên cứu.</p>$$
r_{t,t+1}^{TSMOM} = \frac{1}{S_t} \sum sign(r_{t-6, t})\frac{0.4}{\sigma_t}r_{t,t+1}
$$<p><img loading=lazy src=images/9.png alt=9.png></p><p>So sánh với VNINDEX, trong khung thời gian tháng, ta có mối tương quan giữa chiến lược TSMOM và lợi nhuận của VNINDEX như sau
<img loading=lazy src=images/10.png alt=10.png>
Với đặc tính momentum, chúng ta sẽ được bảo vệ khi thị trường giảm hoặc volatile thì chúng ta sẽ không có vị thế hoặc position sẽ giảm lại. Trong khi gia tăng “expose” khi thị trường ổn định và “đu sóng”.</p><h2 id=kết-luận>Kết luận<a hidden class=anchor aria-hidden=true href=#kết-luận>#</a></h2><p>Chiến lược Time Series Momentum (TSMOM) là một phương pháp giao dịch hiệu quả khai thác động lượng giá của cổ phiếu dựa trên hiệu suất quá khứ. Qua phân tích dữ liệu thị trường Việt Nam, chúng ta có thể rút ra một số kết luận chính:</p><ol><li>Hiệu ứng momentum tồn tại rõ rệt trong ngắn hạn, đặc biệt là trong khoảng 2-6 tuần đầu tiên sau khi có tín hiệu.</li><li>Các cổ phiếu có xu hướng duy trì đà tăng/giảm trong ngắn hạn, tuy nhiên sau khoảng 10 tuần có thể có hiện tượng đảo chiều → chúng ta có thể tạo ra một factor “Reversal” dựa trên phát hiện này.</li><li>Để áp dụng hiệu quả chiến lược TSMOM, cần chú ý:</li></ol><ul><li>Xác định chính xác tín hiệu mua dựa trên momentum quá khứ - Sử dụng các kĩ thuật regression analysis</li><li>Điều chỉnh kích thước vị thế theo biến động của thị trường (a.k.a xác định volatility target)</li></ul><p>Chiến lược này có thể được cải thiện thêm bằng cách kết hợp với các chỉ báo kỹ thuật khác nhằm thay đổi signal hoặc sizing theo một công thức khác.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>The Financial Engineer</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>