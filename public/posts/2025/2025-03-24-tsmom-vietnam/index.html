<!doctype html><html lang=vi dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Time series momentum - A traditional approach | The Financial Engineer</title>
<meta name=keywords content><meta name=description content="Time series momentum thử nghiệm trên thị trường Việt Nam"><meta name=author content><link rel=canonical href=http://localhost:1313/posts/2025/2025-03-24-tsmom-vietnam/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=vi href=http://localhost:1313/posts/2025/2025-03-24-tsmom-vietnam/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous referrerpolicy=no-referrer><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous referrerpolicy=no-referrer type=text/javascript></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous referrerpolicy=no-referrer type=text/javascript></script><script type=text/javascript>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-BEV31LZP2J"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-BEV31LZP2J")}</script><meta property="og:title" content="Time series momentum - A traditional approach"><meta property="og:description" content="Time series momentum thử nghiệm trên thị trường Việt Nam"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/2025/2025-03-24-tsmom-vietnam/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-24T00:00:00+00:00"><meta property="article:modified_time" content="2025-03-24T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Time series momentum - A traditional approach"><meta name=twitter:description content="Time series momentum thử nghiệm trên thị trường Việt Nam"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Time series momentum - A traditional approach","item":"http://localhost:1313/posts/2025/2025-03-24-tsmom-vietnam/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Time series momentum - A traditional approach","name":"Time series momentum - A traditional approach","description":"Time series momentum thử nghiệm trên thị trường Việt Nam","keywords":[],"articleBody":" Time Series Momentum - TSMOM, được Moskowitz, Ooi và Pedersen (2012), là một trong những chiến lược factor investing nổi bật và được nhiều nhà phân tích, nhà nghiên cứu thử nghiệm trên đa dạng thị trường. Hôm nay chúng ta sẽ tìm hiểu về chiến lược này, xem xét cách họ kiểm định các giả thuyết và xây dựng nên một chiến lược factor investing.\nConcept Khác với XSMOM (Cross sectional momentum , bạn có thể đọc tại đây), TSMOM tập trung vào khai thác động lượng của cổ phiếu đó so với quá khứ của chính nó (thay vì nhìn con nhà người ta và so sánh với họ, thì TSMOM là vượt lên chính mình là được rồi, haha). Chiến lược này dựa trên giả thuyết rằng xu hướng giá có tính liên tục (persistence) và có thể dự đoán được phần nào dựa trên lịch sử giá. Thay vì so sánh hiệu suất giữa các tài sản như XSMOM, TSMOM xem xét liệu một tài sản có duy trì được đà tăng/giảm của chính nó hay không.\nQuantopia có 1 bài viết và video rất sâu về TSMOM: link\nOK, khái niệm rất đơn giản. Giả thuyết của chúng ta là: “Cổ phiếu sẽ tiếp tục đà tăng/giảm dựa trên hiệu suất trong quá khứ”. Hãy cùng kiểm định giả thuyết này cho thị trường Việt Nam nhé.\nBài viết này sẽ cố gắng xây dựng lại các thử nghiệm và giả thuyết dựa trên:\nhttps://pages.stern.nyu.edu/~lpederse/papers/TSMOM_Slides.pdf\nRegression and evidence Họ bắt đầu với độ biến động (volatility) như một biến chuẩn hóa cho lợi nhuận vì mỗi cổ phiếu có mức độ volatile khác nhau. Trong bài viết, họ sử dụng mô hình EWMA đơn giản để tính toán độ rủi ro (volatility).\n$$ \\sigma_t^2\\;=\\;261\\sum_{i=0}^\\infty(1-\\delta)\\,\\delta^i\\bigl(r_{t-1-i} - \\overline{r}_t\\bigr)^2 $$Với:\nσ²ₜ là phương sai tại thời điểm t 261 là số ngày giao dịch trong năm → chúng ta sẽ đổi tham số này thành 252 cho thị trường Việt Nam. δ (delta) là hệ số suy giảm. Một cách tính toán để gán trọng số cao hơn cho dữ liệu gần đây và giảm dần theo thời gian. → phản ảnh biến động gần đây quan trọng hơn. Cách tính này khác độ biến động volatility thông thường khi độ biến động mọi ngày trong khoảng thời gian quan sát có độ quan trọng giống nhau. rₜ₋₁₋ᵢ là lợi nhuận tại thời điểm t-1-i r̄ₜ là lợi nhuận trung bình Volatility thu được từ công thức này sẽ được sử dụng để chuẩn hóa lợi nhuận, giúp so sánh công bằng giữa các cổ phiếu có mức độ biến động khác nhau.\nLet’s code it in python\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 def exante_volatility(returns, com=60, annualization=252): \"\"\" Compute the ex ante annualized volatility using an exponentially weighted variance. The formula is: σ_t^2 = 252 * Σ_{i=0}^∞ w_i (r_{t-1-i} - r̄_t)^2, Parameters: returns (pd.Series): Asset returns. com (int): Center of mass for the exponential weights (default is 60). annualization: annualization factor - default is 252 Returns: pd.Series: The ex ante volatility σ_t (annualized by multiplying the variance by 261). Volatility is computed using returns up to t-1. \"\"\" ewm_variance = returns.ewm(com=com, adjust=False,min_periods=com).var() sigma = np.sqrt(annualization * ewm_variance) return sigma Kết quả của tính toán trên sẽ trông như sau, với đường màu xanh tượng trưng cho độ biến động (volatility) và đường màu cam là giá cổ phiếu ACB.\nRegression analysis Để kiểm định giả thuyết “Cổ phiếu sẽ tiếp tục đà tăng/giảm dựa trên hiệu suất trong quá khứ”, chúng ta sẽ sử dụng phân tích hồi quy (regression analysis). Phân tích hồi quy sẽ giúp chúng ta hiểu mối quan hệ giữa lợi nhuận trong quá khứ và lợi nhuận trong tương lai, cũng như đánh giá độ tin cậy của mối quan hệ này. Cụ thể, chúng ta sẽ thực hiện hồi quy lợi nhuận trong tương lai (future returns) lên lợi nhuận trong quá khứ (past returns).\nTuy nhiên, kiểm định này được thực hiện khác với bài viết gốc. Trong khi bài viết gốc sử dụng dữ liệu tháng để chạy hồi quy, người viết muốn thử nghiệm với dữ liệu tuần (tức giao dịch theo tuần) để xem chiến lược này hoạt động như thế nào. Do đó, tất cả các thử nghiệm hồi quy và chiến lược backtest sẽ được thực hiện trên dữ liệu tuần.\nMô hình hồi quy cơ bản có dạng:\n$$ \\frac{r_{t}^s}{\\sigma_{t-1}^s} = \\alpha + \\beta_h \\frac{r_{t-h}^s}{\\sigma_{t-h-1}^s} + \\epsilon_h^s $$ Ngoài ra, không chỉ đánh giá mỗi lợi nhuận lịch sử, tác giả đánh giá khả năng dự đoán của TSMOM thông qua hồi quy tín hiệu đơn giản - sign- của lợi nhuận (sign số dương bằng 1 và số âm bằng -1)\n$$ \\frac{r_{t}^s}{\\sigma_{t-1}^s} = \\alpha + \\beta_h \\text{sign}(r_{t-h}^s) + \\epsilon_h^s $$ 2 mô hình hồi quy trên được chạy trên giá của 60 cổ phiếu có giá trị giao dịch cao nhất và niêm yết từ 2014 tới nay.\nMỗi cột biểu diễn giá trị t-statistic của βh ứng với từng độ trễ (week lag) từ 1 đến 50 tuần. Đường nét đứt màu đỏ (thường) biểu thị mức ý nghĩa thống kê ở khoảng ±1.96(tương đương kiểm định hai phía với mức ý nghĩa 5%). Nếu cột (tức t-statistic) vượt quá giá trị này về phía dương hoặc âm, ta có thể kết luận hệ số βh là có ý nghĩa thống kê tại độ trễ (lookback) tương ứng. Ở độ trễ 2 và 6, ta thấy nhiều cột t-statistic rất cao, cho thấy βh dương và có ý nghĩa thống kê. Điều này chứng tỏ có hiệu ứng động lượng (momentum) đáng kể trong ngắn hạn, tức là cổ phiếu có xu hướng duy trì đà tăng/giảm trong vài tuần đầu tiên. Tức nếu 2 hoặc 6 tuần trước giá cổ phiếu tăng thì tuần này cũng có khả năng tăng rất cao và ngược lại. Khi độ trễ tăng (từ khoảng 10 tuần trở đi), ta thấy t-stat dưới -2 cho thấy có thể có yếu tố “reversal” tức sau 10 tuần thì trend có khả năng đảo chiều. Một chút phân tích: ở khung thời gian tuần, thị trường có thể bị ảnh hưởng nhiều bởi các yếu tố tâm lý, thanh khoản, tin tức ngắn hạn… Do đó, momentum thường bộc lộ rõ hơn trong vài tuần đầu, rồi nhanh chóng phai dần hoặc đảo ngược khi nhà đầu tư điều chỉnh vị thế hoặc chốt lời (10 tuần ~ 2 tháng)\n[Vì code cho regression test khá dài nên nhờ bạn comment email ở linkedin và mình sẽ gửi đến bạn nhanh nhất]\nSau khi chạy kiểm định hồi quy, ta rút ra được rằng chiến lược TSMOM có hiệu quả đáng kể trong ngắn hạn, đặc biệt là trong khoảng 2-6 tuần đầu tiên khi cổ phiếu có xu hướng duy trì đà tăng/giảm của mình. Tuy nhiên, sau khoảng 10 tuần (tương đương 2 tháng), hiệu ứng này có dấu hiệu đảo chiều, cho thấy các nhà đầu tư nên cân nhắc điều chỉnh chiến lược giao dịch của mình sau khung thời gian này. Giờ chúng ta sẽ cùng phát triển chiến lược TSMOM dựa trên khung thời gian tuần nhé.\nTSMOM, design from scratch. Đối với bất kỳ chiến lược giao dịch nào, chúng ta cần xác định 2 yếu tố: thời điểm mua (signal) và số lượng mua (position). TSMOM cũng cần 2 bước này.\nSignal Chiến lược momentum có signal tương đối đơn giản, nếu lợi nhuận tích luỹ trong “h” tháng lớn hơn 0 thì long, nếu âm thì short, còn nếu bằng 0 thì không làm gì. Vì chúng ta đang thử nghiệm ở thị trường VN nên chiến lược được thiết kế dạng long-only.\n1 2 3 4 5 6 7 8 9 10 11 12 13 def compute_signal(returns, window=6): \"\"\" Compute the trading signal based on cumulative standardized returns over a rolling window. The paper uses: signal_t = sign(r_{t-6,t}^s) where r_{t-6,t}^s is the return from t-window to t. \"\"\" cum_rets = returns.rolling(window=window).apply(lambda x: np.prod(x)) ## lợi nhuận tích luỹ signal = np.sign(cum_rets).clip(lower=0) ## sign để lấy chiều, clip lower 0 để loại bỏ các tín hiệu -1 tượng trưng cho short return signal Signal sẽ trông như thế này. 1 sẽ tương ứng với mua, và 0 là không làm gì.\nPosition sizing Với chiến lược momentum, rủi ro chính là việc không thể dự đoán được thời điểm thị trường đảo chiều. Tuy nhiên, chúng ta có thể hạn chế rủi ro này thông qua kỹ thuật “Inverse volatility” (đi ngược biến động).\nThay vì cố đoán thời điểm đảo chiều, chúng ta sẽ xác định trước mức rủi ro chấp nhận được và điều chỉnh vị thế khi rủi ro tăng - Volatility targeting. Đối với cổ phiếu có biến động thấp, ta có thể sử dụng thêm margin để tăng mức độ phơi nhiễm lên mức mục tiêu, từ đó tối ưu hóa cơ hội đầu tư.\nBài viết gốc sử dụng mức rủi ro mục tiêu là 40% (hàng năm). Chúng ta sẽ cùng thử nghiệm với cổ phiếu ACB, sử dụng volatility targeting để xác định kích thước vị thế như sau:\nCột màu cam thể hiện số lượng cổ phiếu mua dưới dạng phần trăm (%) trong khoảng từ 0 đến 2 (tức 0–200%). Mức trần được giới hạn ở 2 với giả định chúng ta luôn ký quỹ được 50%. Trong các giai đoạn rủi ro cao như 2016, 2018 và 2022, sizing của chúng ta dao động từ 0 đến 1.8 tùy thời điểm. Đặc biệt năm 2018—năm biến động rất lớn của ACB—chúng ta chỉ mua cổ phiếu dưới 100% số tiền hiện có (đi ngược độ biến động), từ đó bảo toàn được vốn. Sizing phụ thuộc vào Volaitlity target chúng ta đã đặt từ trước, volatility target càng nhỏ thì position sẽ giảm lại.\nChung quy lại, TSMOM dựa trên 2 kỹ thuật sau\nXác định cổ phiếu có đang trend không dựa trên lợi nhuận tích luỹ trong “h” tháng vừa qua. Xác định số cổ phiếu cần mua dựa trên kỹ thuật volatility targeting. Backtest Backtest cho chiến lược này tương đối đơn giản. Ta sẽ lấy tín hiệu (signal) nhân với số lượng (sizing) và nhân với lợi nhuận tuần sau trừ đi chi phí\n$$ r_{t,t+1}^{TSMOM} =\\text{signal} *\\text{position} *\\text{return} - \\text{cost}= sign(r_{t-6, t})*\\frac{0.4}{\\sigma_t}*r_{t,t+1} - \\text{cost} $$ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 def backtest(daily_price, vol_target=0.4, look_back = 6, commission=0.001): \"\"\" Backtest a trading strategy that goes long (short) when the signal is +1 (-1). Parameters: returns (pd.Series): Asset returns. Returns: pd.Series: The strategy returns. \"\"\" ## compute the daily ex ante volatility first daily_return = daily_price.pct_change().dropna() weekly_return = daily_price.resample('W').last().pct_change().dropna() daily_vol = exante_volatility(daily_return, com=60) weekly_vol = daily_vol.resample('W').last().ffill() ## position sizing position_size = vol_target / weekly_vol position_size = position_size.clip(upper=2) ## max margin is 2 signal = compute_signal(weekly_return, window=look_back) position = signal * position_size trade_cost = 2 * commission * position.diff().abs().shift(-1) ## Compute strategy returns: # Use the previous period's position (position.shift(1)) applied to the current week's return, # and subtract any commission cost incurred at the beginning of the period. strat_ret = (position * weekly_return.shift(-1) - trade_cost) return_df = pd.DataFrame({ 'raw_rets': weekly_return, 'signal': signal, 'position_size': position_size, 'position': position, 'trade_cost': trade_cost, 'strat_rets': strat_ret }) return return_df.dropna() Thử nghiệm trên cổ phiếu HPG, ta thấy lợi nhuận tích luỹ vượt trội hẳn so với chiến lược buy and hold thông thường.\nTSMOM - HPG Buy\u0026Hold - HPG Lợi nhuận hàng năm 29.23% 23.63% Biến động hằng năm 29.03% 33.65% Sharpe 1.01 0.7 Skewness 0.36 0.36 Kurtosis 4.16 3.67 Vì chỉ mua khi cổ phiếu có “trend” và tận dụng sử dụng margin khi cổ phiếu biến động thấp và giảm vị thế khi cổ phiếu biến động mạnh, nên lợi nhuận cũng như độ biến động trung bình hằng năm đều tốt hơn so với chiến lược chỉ buy and hold cổ phiếu. Từ đó dẫn đến tỷ lệ sharpe vượt lên mức 1.\n60 cổ phiếu trong sample test\nsymbol Annualized Return Annualized Volatility Sharpe Ratio Skewness Kurtosis FPT 39% 31% 1.26 1.28 6.60 PDR 36% 32% 1.10 1.19 6.96 MBB 32% 31% 1.03 1.29 5.57 VND 31% 30% 1.03 1.38 7.40 HCM 28% 28% 1.02 1.00 5.98 TCM 29% 30% 0.98 1.52 7.69 HPG 27% 29% 0.93 0.41 4.11 VCB 30% 32% 0.93 1.33 6.02 VIX 29% 31% 0.93 1.53 7.92 HSG 24% 27% 0.89 0.73 4.03 NKG 29% 32% 0.89 0.98 5.41 PNJ 29% 33% 0.89 0.80 5.62 KDH 26% 32% 0.81 1.18 5.45 HDG 22% 28% 0.80 0.61 4.14 ACB 25% 33% 0.77 1.92 14.27 CTD 23% 33% 0.69 0.43 4.34 SSI 19% 28% 0.68 0.46 5.39 DIG 21% 31% 0.67 1.37 8.70 SHB 20% 32% 0.63 3.04 20.06 HDC 20% 32% 0.62 1.08 4.97 REE 17% 29% 0.60 0.47 4.33 TSC 20% 34% 0.60 1.03 7.22 CTG 18% 31% 0.59 0.66 6.49 KBC 18% 31% 0.58 1.19 8.48 PHR 19% 33% 0.58 0.78 5.49 NLG 16% 29% 0.57 1.03 7.06 KSB 15% 31% 0.50 0.81 6.68 VNM 13% 27% 0.50 0.70 7.44 IJC 16% 33% 0.49 2.77 19.07 TTF 14% 28% 0.49 0.18 5.94 CII 12% 27% 0.45 1.68 11.26 DBC 13% 31% 0.43 0.80 8.50 DXG 12% 28% 0.43 (0.15) 5.11 STB 13% 29% 0.43 0.39 5.32 FIT 14% 34% 0.41 1.30 9.66 DRC 11% 28% 0.40 0.22 4.87 LCG 10% 25% 0.40 0.45 5.13 GAS 11% 28% 0.39 0.12 7.19 HHS 14% 35% 0.39 (1.36) 21.84 PVT 11% 28% 0.39 0.60 7.48 IDI 12% 33% 0.38 1.90 13.31 KDC 12% 33% 0.38 2.93 25.95 PAN 12% 31% 0.37 1.86 15.15 VIC 10% 32% 0.30 1.48 9.59 OGC 9% 31% 0.29 1.98 12.33 SBT 9% 33% 0.28 (1.09) 14.14 VCG 7% 28% 0.26 0.48 6.63 HAG 7% 30% 0.24 1.35 13.48 ASM 7% 28% 0.23 (0.02) 7.90 PET 7% 31% 0.23 1.47 10.78 DPM 6% 28% 0.22 0.63 6.32 DLG 6% 31% 0.19 1.30 11.48 PVD 6% 30% 0.19 0.07 6.02 BVH 5% 30% 0.18 1.15 11.03 GMD 4% 26% 0.16 0.79 4.16 HQC 5% 31% 0.16 2.68 20.08 MSN 4% 31% 0.14 1.72 13.40 VHC 3% 30% 0.11 (0.15) 5.46 FCN 2% 29% 0.09 0.38 8.03 EIB -2% 29% (0.08) 0.40 8.00 Để tạo một factor TSMOM, chúng ta cần tính trung bình cho toàn bộ mẫu nghiên cứu.\n$$ r_{t,t+1}^{TSMOM} = \\frac{1}{S_t} \\sum sign(r_{t-6, t})\\frac{0.4}{\\sigma_t}r_{t,t+1} $$ So sánh với VNINDEX, trong khung thời gian tháng, ta có mối tương quan giữa chiến lược TSMOM và lợi nhuận của VNINDEX như sau Với đặc tính momentum, chúng ta sẽ được bảo vệ khi thị trường giảm hoặc volatile thì chúng ta sẽ không có vị thế hoặc position sẽ giảm lại. Trong khi gia tăng “expose” khi thị trường ổn định và “đu sóng”.\nKết luận Chiến lược Time Series Momentum (TSMOM) là một phương pháp giao dịch hiệu quả khai thác động lượng giá của cổ phiếu dựa trên hiệu suất quá khứ. Qua phân tích dữ liệu thị trường Việt Nam, chúng ta có thể rút ra một số kết luận chính:\nHiệu ứng momentum tồn tại rõ rệt trong ngắn hạn, đặc biệt là trong khoảng 2-6 tuần đầu tiên sau khi có tín hiệu. Các cổ phiếu có xu hướng duy trì đà tăng/giảm trong ngắn hạn, tuy nhiên sau khoảng 10 tuần có thể có hiện tượng đảo chiều → chúng ta có thể tạo ra một factor “Reversal” dựa trên phát hiện này. Để áp dụng hiệu quả chiến lược TSMOM, cần chú ý: Xác định chính xác tín hiệu mua dựa trên momentum quá khứ - Sử dụng các kĩ thuật regression analysis Điều chỉnh kích thước vị thế theo biến động của thị trường (a.k.a xác định volatility target) Chiến lược này có thể được cải thiện thêm bằng cách kết hợp với các chỉ báo kỹ thuật khác nhằm thay đổi signal hoặc sizing theo một công thức khác.\n","wordCount":"2727","inLanguage":"vi","datePublished":"2025-03-24T00:00:00Z","dateModified":"2025-03-24T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/2025/2025-03-24-tsmom-vietnam/"},"publisher":{"@type":"Organization","name":"The Financial Engineer","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="The Financial Engineer (Alt + H)">The Financial Engineer</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/about/ title=About><span>About</span></a></li><li><a href=http://localhost:1313/archives/ title=Archive><span>Archive</span></a></li><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li><li><a href=http://localhost:1313/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Time series momentum - A traditional approach</h1><div class=post-description>Time series momentum thử nghiệm trên thị trường Việt Nam</div><div class=post-meta><span title='2025-03-24 00:00:00 +0000 UTC'>tháng 3 24, 2025</span>&nbsp;·&nbsp;13 phút</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Mục lục</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#concept>Concept</a></li><li><a href=#regression-and-evidence>Regression and evidence</a><ul><li><a href=#regression-analysis>Regression analysis</a></li></ul></li><li><a href=#tsmom-design-from-scratch>TSMOM, design from scratch.</a><ul><li><a href=#signal>Signal</a></li></ul></li><li><a href=#position-sizing>Position sizing</a></li><li><a href=#backtest>Backtest</a></li><li><a href=#kết-luận>Kết luận</a></li></ul></nav></div></details></div><div class=post-content><p><img loading=lazy src=images/0.png alt=0.png></p><p>Time Series Momentum - TSMOM, được Moskowitz, Ooi và Pedersen (2012), là một trong những chiến lược factor investing nổi bật và được nhiều nhà phân tích, nhà nghiên cứu thử nghiệm trên đa dạng thị trường. Hôm nay chúng ta sẽ tìm hiểu về chiến lược này, xem xét cách họ kiểm định các giả thuyết và xây dựng nên một chiến lược factor investing.</p><h2 id=concept>Concept<a hidden class=anchor aria-hidden=true href=#concept>#</a></h2><p>Khác với XSMOM (Cross sectional momentum , bạn có thể đọc <a href=https://www.linkedin.com/feed/update/urn:li:activity:7305494271439081472>tại đây</a>), TSMOM tập trung vào khai thác động lượng của cổ phiếu đó so với quá khứ của chính nó (thay vì nhìn con nhà người ta và so sánh với họ, thì TSMOM là vượt lên chính mình là được rồi, haha). Chiến lược này dựa trên giả thuyết rằng xu hướng giá có tính liên tục (persistence) và có thể dự đoán được phần nào dựa trên lịch sử giá. Thay vì so sánh hiệu suất giữa các tài sản như XSMOM, TSMOM xem xét liệu một tài sản có duy trì được đà tăng/giảm của chính nó hay không.</p><p>Quantopia có 1 bài viết và video rất sâu về TSMOM: <a href=https://quantpedia.com/strategies/time-series-momentum-effect/>link</a></p><p><img loading=lazy src=images/1.png alt=1.png></p><p>OK, khái niệm rất đơn giản. Giả thuyết của chúng ta là: &ldquo;Cổ phiếu sẽ tiếp tục đà tăng/giảm dựa trên hiệu suất trong quá khứ&rdquo;. Hãy cùng kiểm định giả thuyết này cho thị trường Việt Nam nhé.</p><p>Bài viết này sẽ cố gắng xây dựng lại các thử nghiệm và giả thuyết dựa trên:</p><p><a href=https://pages.stern.nyu.edu/~lpederse/papers/TSMOM_Slides.pdf>https://pages.stern.nyu.edu/~lpederse/papers/TSMOM_Slides.pdf</a></p><h2 id=regression-and-evidence>Regression and evidence<a hidden class=anchor aria-hidden=true href=#regression-and-evidence>#</a></h2><p>Họ bắt đầu với độ biến động (volatility) như một biến chuẩn hóa cho lợi nhuận vì mỗi cổ phiếu có mức độ volatile khác nhau. Trong bài viết, họ sử dụng mô hình EWMA đơn giản để tính toán độ rủi ro (volatility).</p>$$
\sigma_t^2\;=\;261\sum_{i=0}^\infty(1-\delta)\,\delta^i\bigl(r_{t-1-i} - \overline{r}_t\bigr)^2
$$<p>Với:</p><ul><li>σ²ₜ là phương sai tại thời điểm t</li><li>261 là số ngày giao dịch trong năm → chúng ta sẽ đổi tham số này thành 252 cho thị trường Việt Nam.</li><li>δ (delta) là hệ số suy giảm. Một cách tính toán để gán trọng số cao hơn cho dữ liệu gần đây và giảm dần theo thời gian. → phản ảnh biến động gần đây quan trọng hơn. Cách tính này khác độ biến động volatility thông thường khi độ biến động mọi ngày trong khoảng thời gian quan sát có độ quan trọng giống nhau.</li><li>rₜ₋₁₋ᵢ là lợi nhuận tại thời điểm t-1-i</li><li>r̄ₜ là lợi nhuận trung bình</li></ul><p>Volatility thu được từ công thức này sẽ được sử dụng để chuẩn hóa lợi nhuận, giúp so sánh công bằng giữa các cổ phiếu có mức độ biến động khác nhau.</p><p>Let’s code it in python</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>exante_volatility</span>(returns, com<span style=color:#f92672>=</span><span style=color:#ae81ff>60</span>, annualization<span style=color:#f92672>=</span><span style=color:#ae81ff>252</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Compute the ex ante annualized volatility using an exponentially weighted variance.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    The formula is:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      σ_t^2 = 252 * Σ_{i=0}^∞ w_i (r_{t-1-i} - r̄_t)^2,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Parameters:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        returns (pd.Series): Asset returns.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        com (int): Center of mass for the exponential weights (default is 60).
</span></span></span><span style=display:flex><span><span style=color:#e6db74>		    annualization: annualization factor - default is 252    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        pd.Series: The ex ante volatility σ_t (annualized by multiplying the variance by 261).
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                   Volatility is computed using returns up to t-1.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    ewm_variance <span style=color:#f92672>=</span> returns<span style=color:#f92672>.</span>ewm(com<span style=color:#f92672>=</span>com, adjust<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>,min_periods<span style=color:#f92672>=</span>com)<span style=color:#f92672>.</span>var()
</span></span><span style=display:flex><span>    sigma <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>sqrt(annualization <span style=color:#f92672>*</span> ewm_variance)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> sigma
</span></span></code></pre></td></tr></table></div></div><p>Kết quả của tính toán trên sẽ trông như sau, với đường màu xanh tượng trưng cho độ biến động (volatility) và đường màu cam là giá cổ phiếu ACB.</p><p><img loading=lazy src=images/2.png alt=2.png></p><h3 id=regression-analysis>Regression analysis<a hidden class=anchor aria-hidden=true href=#regression-analysis>#</a></h3><p>Để kiểm định giả thuyết &ldquo;Cổ phiếu sẽ tiếp tục đà tăng/giảm dựa trên hiệu suất trong quá khứ&rdquo;, chúng ta sẽ sử dụng phân tích hồi quy (regression analysis). Phân tích hồi quy sẽ giúp chúng ta hiểu mối quan hệ giữa lợi nhuận trong quá khứ và lợi nhuận trong tương lai, cũng như đánh giá độ tin cậy của mối quan hệ này. Cụ thể, chúng ta sẽ thực hiện hồi quy lợi nhuận trong tương lai (future returns) lên lợi nhuận trong quá khứ (past returns).</p><p>Tuy nhiên, kiểm định này được thực hiện khác với bài viết gốc. Trong khi bài viết gốc sử dụng dữ liệu tháng để chạy hồi quy, người viết muốn thử nghiệm với dữ liệu tuần (tức giao dịch theo tuần) để xem chiến lược này hoạt động như thế nào. Do đó, tất cả các thử nghiệm hồi quy và chiến lược backtest sẽ được thực hiện trên dữ liệu tuần.</p><p>Mô hình hồi quy cơ bản có dạng:</p>$$
\frac{r_{t}^s}{\sigma_{t-1}^s} = \alpha + \beta_h \frac{r_{t-h}^s}{\sigma_{t-h-1}^s} + \epsilon_h^s
$$<p><img loading=lazy src=images/3.png alt=3.png></p><p>Ngoài ra, không chỉ đánh giá mỗi lợi nhuận lịch sử, tác giả đánh giá khả năng dự đoán của TSMOM thông qua hồi quy tín hiệu đơn giản - <a href=https://en.wikipedia.org/wiki/Sign_function>sign</a>- của lợi nhuận (sign số dương bằng 1 và số âm bằng -1)</p>$$
\frac{r_{t}^s}{\sigma_{t-1}^s} = \alpha + \beta_h \text{sign}(r_{t-h}^s) + \epsilon_h^s
$$<p><img loading=lazy src=images/4.png alt=4.png></p><p>2 mô hình hồi quy trên được chạy trên giá của 60 cổ phiếu có giá trị giao dịch cao nhất và niêm yết từ 2014 tới nay.</p><ul><li>Mỗi cột biểu diễn giá trị t-statistic của βh ứng với từng độ trễ (week lag) từ 1 đến 50 tuần.</li><li>Đường nét đứt màu đỏ (thường) biểu thị mức ý nghĩa thống kê ở khoảng ±1.96(tương đương kiểm định hai phía với mức ý nghĩa 5%). Nếu cột (tức t-statistic) vượt quá giá trị này về phía dương hoặc âm, ta có thể kết luận hệ số βh là có ý nghĩa thống kê tại độ trễ (lookback) tương ứng.</li><li>Ở độ trễ 2 và 6, ta thấy nhiều cột t-statistic rất cao, cho thấy βh dương và có ý nghĩa thống kê. Điều này chứng tỏ có hiệu ứng động lượng (momentum) đáng kể trong ngắn hạn, tức là cổ phiếu có xu hướng duy trì đà tăng/giảm trong vài tuần đầu tiên. Tức nếu 2 hoặc 6 tuần trước giá cổ phiếu tăng thì tuần này cũng có khả năng tăng rất cao và ngược lại.</li><li>Khi độ trễ tăng (từ khoảng 10 tuần trở đi), ta thấy t-stat dưới -2 cho thấy có thể có yếu tố “reversal” tức sau 10 tuần thì trend có khả năng đảo chiều.</li></ul><p>Một chút phân tích: ở khung thời gian tuần, thị trường có thể bị ảnh hưởng nhiều bởi các yếu tố tâm lý, thanh khoản, tin tức ngắn hạn… Do đó, <strong>momentum</strong> thường bộc lộ rõ hơn trong vài tuần đầu, rồi nhanh chóng phai dần hoặc đảo ngược khi nhà đầu tư điều chỉnh vị thế hoặc chốt lời (10 tuần ~ 2 tháng)</p><p>[Vì code cho regression test khá dài nên nhờ bạn comment email ở linkedin và mình sẽ gửi đến bạn nhanh nhất]</p><p>Sau khi chạy kiểm định hồi quy, ta rút ra được rằng chiến lược TSMOM có hiệu quả đáng kể trong ngắn hạn, đặc biệt là trong khoảng 2-6 tuần đầu tiên khi cổ phiếu có xu hướng duy trì đà tăng/giảm của mình. Tuy nhiên, sau khoảng 10 tuần (tương đương 2 tháng), hiệu ứng này có dấu hiệu đảo chiều, cho thấy các nhà đầu tư nên cân nhắc điều chỉnh chiến lược giao dịch của mình sau khung thời gian này. Giờ chúng ta sẽ cùng phát triển chiến lược TSMOM dựa trên khung thời gian tuần nhé.</p><h2 id=tsmom-design-from-scratch>TSMOM, design from scratch.<a hidden class=anchor aria-hidden=true href=#tsmom-design-from-scratch>#</a></h2><p>Đối với bất kỳ chiến lược giao dịch nào, chúng ta cần xác định 2 yếu tố: thời điểm mua (<strong>signal</strong>) và số lượng mua (<strong>position</strong>). TSMOM cũng cần 2 bước này.</p><h3 id=signal>Signal<a hidden class=anchor aria-hidden=true href=#signal>#</a></h3><p>Chiến lược momentum có signal tương đối đơn giản, nếu lợi nhuận tích luỹ trong “h” tháng lớn hơn 0 thì long, nếu âm thì short, còn nếu bằng 0 thì không làm gì. Vì chúng ta đang thử nghiệm ở thị trường VN nên chiến lược được thiết kế dạng long-only.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>compute_signal</span>(returns, window<span style=color:#f92672>=</span><span style=color:#ae81ff>6</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Compute the trading signal based on cumulative standardized returns over a rolling window.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    The paper uses:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>       signal_t = sign(r_{t-6,t}^s)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    where r_{t-6,t}^s is the return from t-window to t.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    cum_rets <span style=color:#f92672>=</span> returns<span style=color:#f92672>.</span>rolling(window<span style=color:#f92672>=</span>window)<span style=color:#f92672>.</span>apply(<span style=color:#66d9ef>lambda</span> x: np<span style=color:#f92672>.</span>prod(x)) <span style=color:#75715e>## lợi nhuận tích luỹ </span>
</span></span><span style=display:flex><span>    signal <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>sign(cum_rets)<span style=color:#f92672>.</span>clip(lower<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>) <span style=color:#75715e>## sign để lấy chiều, clip lower 0 để loại bỏ các tín hiệu -1 tượng trưng cho short</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> signal
</span></span></code></pre></td></tr></table></div></div><p>Signal sẽ trông như thế này. 1 sẽ tương ứng với mua, và 0 là không làm gì.</p><p><img loading=lazy src=images/5.png alt=5.png></p><h2 id=position-sizing>Position sizing<a hidden class=anchor aria-hidden=true href=#position-sizing>#</a></h2><p>Với chiến lược momentum, rủi ro chính là việc không thể dự đoán được thời điểm thị trường đảo chiều. Tuy nhiên, chúng ta có thể hạn chế rủi ro này thông qua kỹ thuật &ldquo;Inverse volatility&rdquo; (đi ngược biến động).</p><p>Thay vì cố đoán thời điểm đảo chiều, chúng ta sẽ xác định trước mức rủi ro chấp nhận được và điều chỉnh vị thế khi rủi ro tăng - Volatility targeting. Đối với cổ phiếu có biến động thấp, ta có thể sử dụng thêm margin để tăng mức độ phơi nhiễm lên mức mục tiêu, từ đó tối ưu hóa cơ hội đầu tư.</p><p>Bài viết gốc sử dụng mức rủi ro mục tiêu là 40% (hàng năm). Chúng ta sẽ cùng thử nghiệm với cổ phiếu ACB, sử dụng volatility targeting để xác định kích thước vị thế như sau:</p><p><img loading=lazy src=images/6.png alt=6.png></p><p>Cột màu cam thể hiện số lượng cổ phiếu mua dưới dạng phần trăm (%) trong khoảng từ 0 đến 2 (tức 0–200%). Mức trần được giới hạn ở 2 với giả định chúng ta luôn ký quỹ được 50%. Trong các giai đoạn rủi ro cao như 2016, 2018 và 2022, sizing của chúng ta dao động từ 0 đến 1.8 tùy thời điểm. Đặc biệt năm 2018—năm biến động rất lớn của ACB—chúng ta chỉ mua cổ phiếu dưới 100% số tiền hiện có (đi ngược độ biến động), từ đó bảo toàn được vốn. Sizing phụ thuộc vào Volaitlity target chúng ta đã đặt từ trước, volatility target càng nhỏ thì position sẽ giảm lại.</p><p>Chung quy lại, TSMOM dựa trên 2 kỹ thuật sau</p><ul><li>Xác định cổ phiếu có đang trend không dựa trên lợi nhuận tích luỹ trong “h” tháng vừa qua.</li><li>Xác định số cổ phiếu cần mua dựa trên kỹ thuật volatility targeting.</li></ul><h2 id=backtest>Backtest<a hidden class=anchor aria-hidden=true href=#backtest>#</a></h2><p>Backtest cho chiến lược này tương đối đơn giản.
Ta sẽ lấy tín hiệu (signal) nhân với số lượng (sizing) và nhân với lợi nhuận tuần sau trừ đi chi phí</p>$$
r_{t,t+1}^{TSMOM} =\text{signal} *\text{position} *\text{return} - \text{cost}= sign(r_{t-6, t})*\frac{0.4}{\sigma_t}*r_{t,t+1} - \text{cost}
$$<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>backtest</span>(daily_price, vol_target<span style=color:#f92672>=</span><span style=color:#ae81ff>0.4</span>, look_back <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>, commission<span style=color:#f92672>=</span><span style=color:#ae81ff>0.001</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Backtest a trading strategy that goes long (short) when the signal is +1 (-1).
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Parameters:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        returns (pd.Series): Asset returns.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        pd.Series: The strategy returns.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>## compute the daily ex ante volatility first</span>
</span></span><span style=display:flex><span>    daily_return <span style=color:#f92672>=</span> daily_price<span style=color:#f92672>.</span>pct_change()<span style=color:#f92672>.</span>dropna()
</span></span><span style=display:flex><span>    weekly_return <span style=color:#f92672>=</span> daily_price<span style=color:#f92672>.</span>resample(<span style=color:#e6db74>&#39;W&#39;</span>)<span style=color:#f92672>.</span>last()<span style=color:#f92672>.</span>pct_change()<span style=color:#f92672>.</span>dropna()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    daily_vol <span style=color:#f92672>=</span> exante_volatility(daily_return, com<span style=color:#f92672>=</span><span style=color:#ae81ff>60</span>)
</span></span><span style=display:flex><span>    weekly_vol <span style=color:#f92672>=</span> daily_vol<span style=color:#f92672>.</span>resample(<span style=color:#e6db74>&#39;W&#39;</span>)<span style=color:#f92672>.</span>last()<span style=color:#f92672>.</span>ffill()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>## position sizing</span>
</span></span><span style=display:flex><span>    position_size <span style=color:#f92672>=</span> vol_target <span style=color:#f92672>/</span> weekly_vol
</span></span><span style=display:flex><span>    position_size <span style=color:#f92672>=</span> position_size<span style=color:#f92672>.</span>clip(upper<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>) <span style=color:#75715e>## max margin is 2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    signal <span style=color:#f92672>=</span> compute_signal(weekly_return, window<span style=color:#f92672>=</span>look_back)
</span></span><span style=display:flex><span>    position <span style=color:#f92672>=</span> signal <span style=color:#f92672>*</span> position_size
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    trade_cost <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> commission <span style=color:#f92672>*</span> position<span style=color:#f92672>.</span>diff()<span style=color:#f92672>.</span>abs()<span style=color:#f92672>.</span>shift(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>## Compute strategy returns:</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Use the previous period&#39;s position (position.shift(1)) applied to the current week&#39;s return,</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># and subtract any commission cost incurred at the beginning of the period.</span>
</span></span><span style=display:flex><span>    strat_ret <span style=color:#f92672>=</span> (position <span style=color:#f92672>*</span> weekly_return<span style=color:#f92672>.</span>shift(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) 
</span></span><span style=display:flex><span>                 <span style=color:#f92672>-</span> trade_cost)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    return_df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>DataFrame({
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;raw_rets&#39;</span>: weekly_return,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;signal&#39;</span>: signal,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;position_size&#39;</span>: position_size,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;position&#39;</span>: position,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;trade_cost&#39;</span>: trade_cost,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;strat_rets&#39;</span>: strat_ret
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> return_df<span style=color:#f92672>.</span>dropna()
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=images/7.png alt=7.png></p><p>Thử nghiệm trên cổ phiếu HPG, ta thấy lợi nhuận tích luỹ vượt trội hẳn so với chiến lược buy and hold thông thường.</p><table><thead><tr><th style=text-align:left></th><th style=text-align:left>TSMOM - HPG</th><th style=text-align:left>Buy&amp;Hold - HPG</th></tr></thead><tbody><tr><td style=text-align:left>Lợi nhuận hàng năm</td><td style=text-align:left>29.23%</td><td style=text-align:left>23.63%</td></tr><tr><td style=text-align:left>Biến động hằng năm</td><td style=text-align:left>29.03%</td><td style=text-align:left>33.65%</td></tr><tr><td style=text-align:left>Sharpe</td><td style=text-align:left>1.01</td><td style=text-align:left>0.7</td></tr><tr><td style=text-align:left>Skewness</td><td style=text-align:left>0.36</td><td style=text-align:left>0.36</td></tr><tr><td style=text-align:left>Kurtosis</td><td style=text-align:left>4.16</td><td style=text-align:left>3.67</td></tr></tbody></table><p>Vì chỉ mua khi cổ phiếu có “trend” và tận dụng sử dụng margin khi cổ phiếu biến động thấp và giảm vị thế khi cổ phiếu biến động mạnh, nên lợi nhuận cũng như độ biến động trung bình hằng năm đều tốt hơn so với chiến lược chỉ buy and hold cổ phiếu. Từ đó dẫn đến tỷ lệ sharpe vượt lên mức 1.</p><p>60 cổ phiếu trong sample test</p><table><thead><tr><th style=text-align:left>symbol</th><th style=text-align:left>Annualized Return</th><th style=text-align:left>Annualized Volatility</th><th style=text-align:left>Sharpe Ratio</th><th style=text-align:left>Skewness</th><th style=text-align:left>Kurtosis</th></tr></thead><tbody><tr><td style=text-align:left>FPT</td><td style=text-align:left>39%</td><td style=text-align:left>31%</td><td style=text-align:left>1.26</td><td style=text-align:left>1.28</td><td style=text-align:left>6.60</td></tr><tr><td style=text-align:left>PDR</td><td style=text-align:left>36%</td><td style=text-align:left>32%</td><td style=text-align:left>1.10</td><td style=text-align:left>1.19</td><td style=text-align:left>6.96</td></tr><tr><td style=text-align:left>MBB</td><td style=text-align:left>32%</td><td style=text-align:left>31%</td><td style=text-align:left>1.03</td><td style=text-align:left>1.29</td><td style=text-align:left>5.57</td></tr><tr><td style=text-align:left>VND</td><td style=text-align:left>31%</td><td style=text-align:left>30%</td><td style=text-align:left>1.03</td><td style=text-align:left>1.38</td><td style=text-align:left>7.40</td></tr><tr><td style=text-align:left>HCM</td><td style=text-align:left>28%</td><td style=text-align:left>28%</td><td style=text-align:left>1.02</td><td style=text-align:left>1.00</td><td style=text-align:left>5.98</td></tr><tr><td style=text-align:left>TCM</td><td style=text-align:left>29%</td><td style=text-align:left>30%</td><td style=text-align:left>0.98</td><td style=text-align:left>1.52</td><td style=text-align:left>7.69</td></tr><tr><td style=text-align:left>HPG</td><td style=text-align:left>27%</td><td style=text-align:left>29%</td><td style=text-align:left>0.93</td><td style=text-align:left>0.41</td><td style=text-align:left>4.11</td></tr><tr><td style=text-align:left>VCB</td><td style=text-align:left>30%</td><td style=text-align:left>32%</td><td style=text-align:left>0.93</td><td style=text-align:left>1.33</td><td style=text-align:left>6.02</td></tr><tr><td style=text-align:left>VIX</td><td style=text-align:left>29%</td><td style=text-align:left>31%</td><td style=text-align:left>0.93</td><td style=text-align:left>1.53</td><td style=text-align:left>7.92</td></tr><tr><td style=text-align:left>HSG</td><td style=text-align:left>24%</td><td style=text-align:left>27%</td><td style=text-align:left>0.89</td><td style=text-align:left>0.73</td><td style=text-align:left>4.03</td></tr><tr><td style=text-align:left>NKG</td><td style=text-align:left>29%</td><td style=text-align:left>32%</td><td style=text-align:left>0.89</td><td style=text-align:left>0.98</td><td style=text-align:left>5.41</td></tr><tr><td style=text-align:left>PNJ</td><td style=text-align:left>29%</td><td style=text-align:left>33%</td><td style=text-align:left>0.89</td><td style=text-align:left>0.80</td><td style=text-align:left>5.62</td></tr><tr><td style=text-align:left>KDH</td><td style=text-align:left>26%</td><td style=text-align:left>32%</td><td style=text-align:left>0.81</td><td style=text-align:left>1.18</td><td style=text-align:left>5.45</td></tr><tr><td style=text-align:left>HDG</td><td style=text-align:left>22%</td><td style=text-align:left>28%</td><td style=text-align:left>0.80</td><td style=text-align:left>0.61</td><td style=text-align:left>4.14</td></tr><tr><td style=text-align:left>ACB</td><td style=text-align:left>25%</td><td style=text-align:left>33%</td><td style=text-align:left>0.77</td><td style=text-align:left>1.92</td><td style=text-align:left>14.27</td></tr><tr><td style=text-align:left>CTD</td><td style=text-align:left>23%</td><td style=text-align:left>33%</td><td style=text-align:left>0.69</td><td style=text-align:left>0.43</td><td style=text-align:left>4.34</td></tr><tr><td style=text-align:left>SSI</td><td style=text-align:left>19%</td><td style=text-align:left>28%</td><td style=text-align:left>0.68</td><td style=text-align:left>0.46</td><td style=text-align:left>5.39</td></tr><tr><td style=text-align:left>DIG</td><td style=text-align:left>21%</td><td style=text-align:left>31%</td><td style=text-align:left>0.67</td><td style=text-align:left>1.37</td><td style=text-align:left>8.70</td></tr><tr><td style=text-align:left>SHB</td><td style=text-align:left>20%</td><td style=text-align:left>32%</td><td style=text-align:left>0.63</td><td style=text-align:left>3.04</td><td style=text-align:left>20.06</td></tr><tr><td style=text-align:left>HDC</td><td style=text-align:left>20%</td><td style=text-align:left>32%</td><td style=text-align:left>0.62</td><td style=text-align:left>1.08</td><td style=text-align:left>4.97</td></tr><tr><td style=text-align:left>REE</td><td style=text-align:left>17%</td><td style=text-align:left>29%</td><td style=text-align:left>0.60</td><td style=text-align:left>0.47</td><td style=text-align:left>4.33</td></tr><tr><td style=text-align:left>TSC</td><td style=text-align:left>20%</td><td style=text-align:left>34%</td><td style=text-align:left>0.60</td><td style=text-align:left>1.03</td><td style=text-align:left>7.22</td></tr><tr><td style=text-align:left>CTG</td><td style=text-align:left>18%</td><td style=text-align:left>31%</td><td style=text-align:left>0.59</td><td style=text-align:left>0.66</td><td style=text-align:left>6.49</td></tr><tr><td style=text-align:left>KBC</td><td style=text-align:left>18%</td><td style=text-align:left>31%</td><td style=text-align:left>0.58</td><td style=text-align:left>1.19</td><td style=text-align:left>8.48</td></tr><tr><td style=text-align:left>PHR</td><td style=text-align:left>19%</td><td style=text-align:left>33%</td><td style=text-align:left>0.58</td><td style=text-align:left>0.78</td><td style=text-align:left>5.49</td></tr><tr><td style=text-align:left>NLG</td><td style=text-align:left>16%</td><td style=text-align:left>29%</td><td style=text-align:left>0.57</td><td style=text-align:left>1.03</td><td style=text-align:left>7.06</td></tr><tr><td style=text-align:left>KSB</td><td style=text-align:left>15%</td><td style=text-align:left>31%</td><td style=text-align:left>0.50</td><td style=text-align:left>0.81</td><td style=text-align:left>6.68</td></tr><tr><td style=text-align:left>VNM</td><td style=text-align:left>13%</td><td style=text-align:left>27%</td><td style=text-align:left>0.50</td><td style=text-align:left>0.70</td><td style=text-align:left>7.44</td></tr><tr><td style=text-align:left>IJC</td><td style=text-align:left>16%</td><td style=text-align:left>33%</td><td style=text-align:left>0.49</td><td style=text-align:left>2.77</td><td style=text-align:left>19.07</td></tr><tr><td style=text-align:left>TTF</td><td style=text-align:left>14%</td><td style=text-align:left>28%</td><td style=text-align:left>0.49</td><td style=text-align:left>0.18</td><td style=text-align:left>5.94</td></tr><tr><td style=text-align:left>CII</td><td style=text-align:left>12%</td><td style=text-align:left>27%</td><td style=text-align:left>0.45</td><td style=text-align:left>1.68</td><td style=text-align:left>11.26</td></tr><tr><td style=text-align:left>DBC</td><td style=text-align:left>13%</td><td style=text-align:left>31%</td><td style=text-align:left>0.43</td><td style=text-align:left>0.80</td><td style=text-align:left>8.50</td></tr><tr><td style=text-align:left>DXG</td><td style=text-align:left>12%</td><td style=text-align:left>28%</td><td style=text-align:left>0.43</td><td style=text-align:left>(0.15)</td><td style=text-align:left>5.11</td></tr><tr><td style=text-align:left>STB</td><td style=text-align:left>13%</td><td style=text-align:left>29%</td><td style=text-align:left>0.43</td><td style=text-align:left>0.39</td><td style=text-align:left>5.32</td></tr><tr><td style=text-align:left>FIT</td><td style=text-align:left>14%</td><td style=text-align:left>34%</td><td style=text-align:left>0.41</td><td style=text-align:left>1.30</td><td style=text-align:left>9.66</td></tr><tr><td style=text-align:left>DRC</td><td style=text-align:left>11%</td><td style=text-align:left>28%</td><td style=text-align:left>0.40</td><td style=text-align:left>0.22</td><td style=text-align:left>4.87</td></tr><tr><td style=text-align:left>LCG</td><td style=text-align:left>10%</td><td style=text-align:left>25%</td><td style=text-align:left>0.40</td><td style=text-align:left>0.45</td><td style=text-align:left>5.13</td></tr><tr><td style=text-align:left>GAS</td><td style=text-align:left>11%</td><td style=text-align:left>28%</td><td style=text-align:left>0.39</td><td style=text-align:left>0.12</td><td style=text-align:left>7.19</td></tr><tr><td style=text-align:left>HHS</td><td style=text-align:left>14%</td><td style=text-align:left>35%</td><td style=text-align:left>0.39</td><td style=text-align:left>(1.36)</td><td style=text-align:left>21.84</td></tr><tr><td style=text-align:left>PVT</td><td style=text-align:left>11%</td><td style=text-align:left>28%</td><td style=text-align:left>0.39</td><td style=text-align:left>0.60</td><td style=text-align:left>7.48</td></tr><tr><td style=text-align:left>IDI</td><td style=text-align:left>12%</td><td style=text-align:left>33%</td><td style=text-align:left>0.38</td><td style=text-align:left>1.90</td><td style=text-align:left>13.31</td></tr><tr><td style=text-align:left>KDC</td><td style=text-align:left>12%</td><td style=text-align:left>33%</td><td style=text-align:left>0.38</td><td style=text-align:left>2.93</td><td style=text-align:left>25.95</td></tr><tr><td style=text-align:left>PAN</td><td style=text-align:left>12%</td><td style=text-align:left>31%</td><td style=text-align:left>0.37</td><td style=text-align:left>1.86</td><td style=text-align:left>15.15</td></tr><tr><td style=text-align:left>VIC</td><td style=text-align:left>10%</td><td style=text-align:left>32%</td><td style=text-align:left>0.30</td><td style=text-align:left>1.48</td><td style=text-align:left>9.59</td></tr><tr><td style=text-align:left>OGC</td><td style=text-align:left>9%</td><td style=text-align:left>31%</td><td style=text-align:left>0.29</td><td style=text-align:left>1.98</td><td style=text-align:left>12.33</td></tr><tr><td style=text-align:left>SBT</td><td style=text-align:left>9%</td><td style=text-align:left>33%</td><td style=text-align:left>0.28</td><td style=text-align:left>(1.09)</td><td style=text-align:left>14.14</td></tr><tr><td style=text-align:left>VCG</td><td style=text-align:left>7%</td><td style=text-align:left>28%</td><td style=text-align:left>0.26</td><td style=text-align:left>0.48</td><td style=text-align:left>6.63</td></tr><tr><td style=text-align:left>HAG</td><td style=text-align:left>7%</td><td style=text-align:left>30%</td><td style=text-align:left>0.24</td><td style=text-align:left>1.35</td><td style=text-align:left>13.48</td></tr><tr><td style=text-align:left>ASM</td><td style=text-align:left>7%</td><td style=text-align:left>28%</td><td style=text-align:left>0.23</td><td style=text-align:left>(0.02)</td><td style=text-align:left>7.90</td></tr><tr><td style=text-align:left>PET</td><td style=text-align:left>7%</td><td style=text-align:left>31%</td><td style=text-align:left>0.23</td><td style=text-align:left>1.47</td><td style=text-align:left>10.78</td></tr><tr><td style=text-align:left>DPM</td><td style=text-align:left>6%</td><td style=text-align:left>28%</td><td style=text-align:left>0.22</td><td style=text-align:left>0.63</td><td style=text-align:left>6.32</td></tr><tr><td style=text-align:left>DLG</td><td style=text-align:left>6%</td><td style=text-align:left>31%</td><td style=text-align:left>0.19</td><td style=text-align:left>1.30</td><td style=text-align:left>11.48</td></tr><tr><td style=text-align:left>PVD</td><td style=text-align:left>6%</td><td style=text-align:left>30%</td><td style=text-align:left>0.19</td><td style=text-align:left>0.07</td><td style=text-align:left>6.02</td></tr><tr><td style=text-align:left>BVH</td><td style=text-align:left>5%</td><td style=text-align:left>30%</td><td style=text-align:left>0.18</td><td style=text-align:left>1.15</td><td style=text-align:left>11.03</td></tr><tr><td style=text-align:left>GMD</td><td style=text-align:left>4%</td><td style=text-align:left>26%</td><td style=text-align:left>0.16</td><td style=text-align:left>0.79</td><td style=text-align:left>4.16</td></tr><tr><td style=text-align:left>HQC</td><td style=text-align:left>5%</td><td style=text-align:left>31%</td><td style=text-align:left>0.16</td><td style=text-align:left>2.68</td><td style=text-align:left>20.08</td></tr><tr><td style=text-align:left>MSN</td><td style=text-align:left>4%</td><td style=text-align:left>31%</td><td style=text-align:left>0.14</td><td style=text-align:left>1.72</td><td style=text-align:left>13.40</td></tr><tr><td style=text-align:left>VHC</td><td style=text-align:left>3%</td><td style=text-align:left>30%</td><td style=text-align:left>0.11</td><td style=text-align:left>(0.15)</td><td style=text-align:left>5.46</td></tr><tr><td style=text-align:left>FCN</td><td style=text-align:left>2%</td><td style=text-align:left>29%</td><td style=text-align:left>0.09</td><td style=text-align:left>0.38</td><td style=text-align:left>8.03</td></tr><tr><td style=text-align:left>EIB</td><td style=text-align:left>-2%</td><td style=text-align:left>29%</td><td style=text-align:left>(0.08)</td><td style=text-align:left>0.40</td><td style=text-align:left>8.00</td></tr></tbody></table><p><img loading=lazy src=images/8.png alt=8.png></p><p>Để tạo một factor TSMOM, chúng ta cần tính trung bình cho toàn bộ mẫu nghiên cứu.</p>$$
r_{t,t+1}^{TSMOM} = \frac{1}{S_t} \sum sign(r_{t-6, t})\frac{0.4}{\sigma_t}r_{t,t+1}
$$<p><img loading=lazy src=images/9.png alt=9.png></p><p>So sánh với VNINDEX, trong khung thời gian tháng, ta có mối tương quan giữa chiến lược TSMOM và lợi nhuận của VNINDEX như sau
<img loading=lazy src=images/10.png alt=10.png>
Với đặc tính momentum, chúng ta sẽ được bảo vệ khi thị trường giảm hoặc volatile thì chúng ta sẽ không có vị thế hoặc position sẽ giảm lại. Trong khi gia tăng “expose” khi thị trường ổn định và “đu sóng”.</p><h2 id=kết-luận>Kết luận<a hidden class=anchor aria-hidden=true href=#kết-luận>#</a></h2><p>Chiến lược Time Series Momentum (TSMOM) là một phương pháp giao dịch hiệu quả khai thác động lượng giá của cổ phiếu dựa trên hiệu suất quá khứ. Qua phân tích dữ liệu thị trường Việt Nam, chúng ta có thể rút ra một số kết luận chính:</p><ol><li>Hiệu ứng momentum tồn tại rõ rệt trong ngắn hạn, đặc biệt là trong khoảng 2-6 tuần đầu tiên sau khi có tín hiệu.</li><li>Các cổ phiếu có xu hướng duy trì đà tăng/giảm trong ngắn hạn, tuy nhiên sau khoảng 10 tuần có thể có hiện tượng đảo chiều → chúng ta có thể tạo ra một factor “Reversal” dựa trên phát hiện này.</li><li>Để áp dụng hiệu quả chiến lược TSMOM, cần chú ý:</li></ol><ul><li>Xác định chính xác tín hiệu mua dựa trên momentum quá khứ - Sử dụng các kĩ thuật regression analysis</li><li>Điều chỉnh kích thước vị thế theo biến động của thị trường (a.k.a xác định volatility target)</li></ul><p>Chiến lược này có thể được cải thiện thêm bằng cách kết hợp với các chỉ báo kỹ thuật khác nhằm thay đổi signal hoặc sizing theo một công thức khác.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/2025/2025-05-17-stock-market-network/><span class=title>« Bài mới hơn</span><br><span>Community detection for VN100</span>
</a><a class=next href=http://localhost:1313/posts/2025/2025-03-18-agents-valuation/><span class=title>Bài cũ hơn »</span><br><span>Agents - Cách mạng công nghiệp lần thứ 5</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Time series momentum - A traditional approach on x" href="https://x.com/intent/tweet/?text=Time%20series%20momentum%20-%20A%20traditional%20approach&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2f2025%2f2025-03-24-tsmom-vietnam%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Time series momentum - A traditional approach on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2f2025%2f2025-03-24-tsmom-vietnam%2f&amp;title=Time%20series%20momentum%20-%20A%20traditional%20approach&amp;summary=Time%20series%20momentum%20-%20A%20traditional%20approach&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2f2025%2f2025-03-24-tsmom-vietnam%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Time series momentum - A traditional approach on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2f2025%2f2025-03-24-tsmom-vietnam%2f&title=Time%20series%20momentum%20-%20A%20traditional%20approach"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Time series momentum - A traditional approach on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2f2025%2f2025-03-24-tsmom-vietnam%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Time series momentum - A traditional approach on whatsapp" href="https://api.whatsapp.com/send?text=Time%20series%20momentum%20-%20A%20traditional%20approach%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2f2025%2f2025-03-24-tsmom-vietnam%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Time series momentum - A traditional approach on telegram" href="https://telegram.me/share/url?text=Time%20series%20momentum%20-%20A%20traditional%20approach&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2f2025%2f2025-03-24-tsmom-vietnam%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Time series momentum - A traditional approach on ycombinator" href="https://news.ycombinator.com/submitlink?t=Time%20series%20momentum%20-%20A%20traditional%20approach&u=http%3a%2f%2flocalhost%3a1313%2fposts%2f2025%2f2025-03-24-tsmom-vietnam%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>The Financial Engineer</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Sao chép";function s(){t.innerHTML="Đã sao chép!",setTimeout(()=>{t.innerHTML="Sao chép"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>